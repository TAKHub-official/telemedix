// This is the Prisma schema file for TeleMedix
// It defines the database models and relationships

generator client {
  provider = "prisma-client-js"
  binaryTargets = ["native", "linux-musl"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// User model - represents all users in the system
model User {
  id              String      @id @default(uuid())
  email           String      @unique
  password        String
  firstName       String
  lastName        String
  role            String      @default("MEDIC") // ADMIN, DOCTOR, MEDIC
  status          String      @default("ACTIVE") // ACTIVE, INACTIVE, SUSPENDED
  createdAt       DateTime    @default(now())
  updatedAt       DateTime    @updatedAt
  lastLoginAt     DateTime?
  auditLogs       AuditLog[]
}

// Audit Log model - for tracking system actions
model AuditLog {
  id          String    @id @default(uuid())
  userId      String
  user        User      @relation(fields: [userId], references: [id])
  action      String
  details     String?
  entityType  String?
  entityId    String?
  ipAddress   String?
  timestamp   DateTime  @default(now())
} 